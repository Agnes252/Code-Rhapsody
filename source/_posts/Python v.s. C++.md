---
title: Python v.s. C++
date: 2026-01-09 20:34:31
tags: [内存管理, C++基础知识, ]
---

## 1. 变量定义的本质区别

- **C++（盒子模型/值语义）：**
  - 变量是内存中一个**固定地址的数据存储盒**。
  - `b = a` 是**数值拷贝**：创建一个新存储盒b，把a的内容复制一份，但b和a的地址不同。
  - 如果需要设置b指向a的地址，需要专门写 `int* b = &a`，这时b是一个指针，指向a的地址。
  - 修改 `b` 不会影响 `a`。
- **Python（标签模型/引用语义）：**
  - 变量是贴在对象上的**标签**。
  - `b = a` 是**标签绑定**：把 `b` 这个标签（变量名）也贴在 `a` 所指向的同一个对象上。 `b` 是 `a` 的别名，是同一个对象的另一个地址索引名称。
  - 修改对象内容时，通过 `a` 或 `b` 访问的结果同步变化。
  - *link：链表 - 链表的基本操作 - 基于dummy head方法删除链表元素*

## 2. Python 中的可变对象 vs 不可变对象

理解了Python的“标签模型”属性后，需要进一步区分这两类对象，因为它们的**标签更换规则**不同。

#### 1. 不可变对象 (Immutable)

**定义：** 一旦在内存中创建，其内容就**不能被修改**。如果你尝试修改它，Python 会创建一个新对象，并将标签指向这个新对象。

- **常见类型：** `int`, `float`, `str`, `tuple`, `bool`

- ```python
  a = 5
  b = a
  b = b + 1  # 并不是把 5 变成了 6，而是在内存造了个 6，把 b 贴到 6 上
  # 结果：a 依然是 5, b 变成了 6
  ```

#### 2. 可变对象 (Mutable)

**定义：** 在内存中的内容**可以被原地修改**。标签指向的地址不变，但地址里的内容变了。

- **常见类型：** `list`, `dict`, `set`, 以及自定义的类（如 `ListNode`）

- ```python
  a = [1, 2]
  b = a
  b.append(3) # 原地修改，a 和 b 指向的那个列表变成了 [1, 2, 3]
  # 结果：a 和 b 同时变成了 [1, 2, 3]
  ```



<span style="color:red;">在 Python 中，如果想得到一个**真正的独立副本**（像 C++ 的 `int b = a` 那样），对于可变对象必须使用 `.copy()`!</span>